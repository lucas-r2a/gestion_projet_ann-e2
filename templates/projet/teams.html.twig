{% extends 'base.html.twig' %}

{% block title %}Équipes du projet {{ projet.name }}{% endblock %}

{% block body %}
<h1 class="text-3xl font-bold mb-6">Équipes du projet « {{ projet.name }} »</h1>


{# <div class="bg-white p-6 rounded-lg shadow mb-10">
    <h2 class="text-xl font-semibold mb-4">Ajouter une équipe</h2>

    <form action="{{ path('app_projet_add_team', {'projet': projet.id}) }}" method="post" class="space-y-4">
        {{ form_start(form) }}

        <div class="flex items-center gap-4">
            <div class="flex-1">
                {{ form_row(form.name) }} 
            </div>

            <button type="submit"
                class="px-4 py-2 bg-blue-600 text-white font-semibold rounded hover:bg-blue-700 transition">
                Ajouter
            </button>
        </div>

        {{ form_end(form) }}
    </form>
</div> #}

<a href="{{ path('app_team_new') }}"
           class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md">
            + New Team
        </a>

<hr class="my-8">

{# --- Liste des équipes liées --- #}
<h2 class="text-2xl font-semibold mb-4">Équipes liées</h2>

{% if projet.liers|length > 0 %}
    <ul class="space-y-3">
        {% for lier in projet.liers %}
            <li class="bg-white p-4 rounded shadow flex justify-between items-center">
                <span class="font-medium">{{ lier.team.name }}</span>

                <form action="{{ path('projet_team_remove', {'projet': projet.id, 'id': lier.id}) }}" method="post"
                      onsubmit="return confirm('Voulez-vous vraiment retirer cette équipe ?');">
                    <input type="hidden" name="_token" value="{{ csrf_token('remove' ~ lier.id) }}">

                    <button type="submit"
                        class="px-3 py-1 bg-red-600 text-white text-sm font-medium rounded hover:bg-red-700 transition">
                        Retirer
                    </button>
                </form>
            </li>
        {% endfor %}
    </ul>
{% else %}
    <p class="text-gray-600 italic">Aucune équipe n’est encore liée à ce projet.</p>
{% endif %}

{% endblock %}
